{
    "info": {
        "_postman_id": "f80e1cdc-5e3a-4bd5-9c77-4d7501111ec8",
        "name": "Postman Hospital",
        "description": "# NomeCollection_VSC\n\n## NomeOspedale_VSC\n\nQuesta collection \u00e8 stata creata automaticamente in data currentDate_VSC, per simulare l'applicativo di un laboratorio di analisi che possieda i seguenti parametri: \n- **L1** = L1code_VSC;\n- **L2** = L2code_VSC;\n- **Codice Applicativo** = CodiceApplicativo_VSC;\n- **Nome Software** = NomeOspedale_VSC;\n- **Nome Applicativo** = ApplName_VSC;\n\n### Funzionamento\nSegui i seguenti passaggi per poter simulare correttamente un servizio web tramite questa collection:\n1. Crea su Postman un nuovo _Environment_ vuoto e chiamalo come preferisci.\n2. Importa le collection generate automaticamente con lo script _PostmanHospital_.\n3. Invia i tuoi messaggi tramite Postman.\n\n\n\n\n\n",
        "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
        "_exporter_id": "25646092"
    },
    "item": [
        {
            "name": "1_NewMessage",
            "item": [
                {
                    "name": "NewMessage1Req",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": "// Crea una stringa in formato ISO 8601 per la data e l'orario\nconst now = new Date();\nconst isoString = now.toISOString();\npm.collectionVariables.set(\"Date\", isoString);\n\n// Definisci il nome del laboratorio\nconst softwareName = \"NomeSoftware_VSC\"   \npm.collectionVariables.set(\"NomeSoftware\", softwareName);\n\nconsole.log(\"\");\nconsole.log(\"This is the pre request script of a new order message, generated at: \" + pm.collectionVariables.get(\"Date\") + \" by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\nvar requisitionKey = \"requisition\";\n\n// Verifica se la variabile \"requisition\" \u00e8 stata precedentemente dichiarata\n// Se non \u00e8 stata dichiarata, imposta il valore predefinito a 1\nlet requisition = pm.collectionVariables.has(requisitionKey)\n  ? pm.collectionVariables.get(requisitionKey)\n  : 1;\n\nif (requisition !== 1) {\n    requisition++;\n}\n\n// Aggiungi zeri iniziali fino a raggiungere la lunghezza desiderata\nrequisition = requisition.toString().padStart(8, \"0\");\n\n// Inserisci i trattini nella variabile \"requisition\"\nvar formattedRequisition = requisition.slice(0, 4) + \"-\" + requisition.slice(4) + '-';\n\n// Stampa il valore formattato della variabile \"requisition\"\nconsole.log(\"The formatted requisition is:\", formattedRequisition);\n\n// Aggiorna il valore della variabile di raccolta \"requisition\"\npm.collectionVariables.set(requisitionKey, requisition);\npm.collectionVariables.set(\"formattedRequisition\", formattedRequisition);\n\n// (Se necessario) Rimuovi la variabile \"requisition\" dalla collezione di variabili\n//pm.collectionVariables.unset(requisitionKey);\n\n// Genera un UUID casuale utilizzando $randomUUID\nconst BundleID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"BundleID\", BundleID);\n\n// Stampa il valore del Bundle ID\nconsole.log(\"The Bundle UID is:\", BundleID);\n\n// Definiamo una di valori predefiniti per le Service Request e i relativi codici SISS\nconst serviceRequestList = [\"Emocromo completo\", \"Insulina a digiuno\", \"Glicemia a digiuno\", \"Magnesio totale nelle urine\", \"Chetosteroidi nelle urine\", \"Cortisolo nel sangue\"];\nconst SISSCodeList = [\"90622\", \"90291\", \"90271\", \"90325\", \"90013\", \"90352\"];\n\n// Genera un indice casuale per selezionare un valore dalla lista\nconst randomIndex = Math.floor(Math.random() * serviceRequestList.length);\nlet randomIndex2 = randomIndex;\n\n// Ripeti il processo per la Service Request 2\nwhile (randomIndex2 === randomIndex) {\n  randomIndex2 = Math.floor(Math.random() * serviceRequestList.length);\n}\n\n// Seleziona il valore casuale dalla lista per la Service Request 1\nconst randomValue =  serviceRequestList[randomIndex] ;\nconst randomSISS =  SISSCodeList[randomIndex] ;\n\n// Seleziona il valore casuale dalla lista per la Service Request 2\nconst randomValue2 =  serviceRequestList[randomIndex2] ;\nconst randomSISS2 =  SISSCodeList[randomIndex2] ;\n\n// Assegna i valori casuali alle variabili delle Service Request\npm.environment.set(\"ServiceRequest1\", randomValue);\npm.environment.set(\"SR1SISS\", randomSISS);\npm.environment.set(\"ServiceRequest2\", randomValue2);\npm.environment.set(\"SR2SISS\", randomSISS2);\n\n// Stampa le prestazioni richieste casualmente\nconsole.log(\"Service Request 1 is:\", randomValue, randomSISS, \"; Service Request 2 is:\", randomValue2, randomSISS2);\n\n// Crea un UUID per il Message Header\nconst MessageHeaderID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"MessageHeaderID\", MessageHeaderID);\npm.collectionVariables.set(\"MessageHeaderFullUrl\", \"MessageHeader\"+\"/\"+MessageHeaderID);\nconsole.log(\"MessageHeaderID:\", MessageHeaderID);\n\n// Crea un placer order number (identificativo univoco dell'ordine) tramite il ServiceOrderNumber\nvar serviceIDKey = \"serviceID\";\n\nlet serviceID = pm.collectionVariables.has(serviceIDKey)\n  ? pm.collectionVariables.get(serviceIDKey)\n  : 1;\n\nif (serviceID !== 1) {\n  serviceID++;\n}\n\nserviceIDString = serviceID.toString().padStart(4, \"0\");\nsecondServiceIDString = (serviceID+1).toString().padStart(4, \"0\");\npm.collectionVariables.set(serviceIDKey, serviceID);\nserviceID++;\npm.collectionVariables.set(serviceIDKey,serviceID);\nconsole.log(\"Service ID:\",serviceID)\n\n// Dichiara le informazioni sull'Ente\nconst CodiceApplicativo = \"CodiceApplicativo_VSC\"  \npm.collectionVariables.set(\"CodiceApplicativo\", CodiceApplicativo);\nconst L1code = \"L1code_VSC\"   \npm.collectionVariables.set(\"L1code\", L1code);\nconst L2code = \"L2code_VSC\"   \npm.collectionVariables.set(\"L2code\", L2code);\n\nconsole.log(\"L1 code: \",pm.collectionVariables.get(\"L1code\"), \"L2 code: \",pm.collectionVariables.get(\"L2code\"))\nconsole.log(\"CodiceApplicativo: \",pm.collectionVariables.get(\"CodiceApplicativo\"))\nconsole.log(\"URL Mock Service: \",pm.collectionVariables.get(\"URL_Mock\"))\n\npm.collectionVariables.set(\"PlacerOrderNumber\", CodiceApplicativo+\"-\"+serviceIDString);\npm.collectionVariables.set(\"PlacerOrderNumber2\", CodiceApplicativo+\"-\"+secondServiceIDString);\nconsole.log(\"\");\n",
                                "type": "text/javascript"
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": "console.log(\"This is the test script of a new order message generated by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\nvar keyNum = 1;\n\nconst headerCount = Object.keys(pm.response.headers).length;\n//console.log(\"Number of headers:\", headerCount);\n\nvar orderUID = pm.response.headers.get(\"OMROrderID\");\npm.environment.set(\"OMROrderUID\", orderUID);\nconsole.log(\"Header OMROrderUID: \" + orderUID);\n\nfor (var i = 1; i <= headerCount-4; i++) {\n    var serviceUID = pm.response.headers.get(\"OMRServiceID\" + i);\n    pm.environment.set(\"OMRServiceUID\" + i, serviceUID);\n    console.log(\"Header OMRServiceUID\" + i + \": \" + serviceUID);\n}\n",
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"richiesta\": \"New Request\",\n    \"resourceType\": \"Bundle\",\n    \"id\": \"{{BundleID}}\",\n    \"type\": \"message\",\n    \"timestamp\": \"{{Date}}\",\n    \"entry\": [\n        {\n            \"fullUrl\": \"{{MessageHeaderFullUrl}}\",\n            \"resource\": {\n                \"resourceType\": \"MessageHeader\",\n                \"id\": \"{{MessageHeaderID}}\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabMessageHeader\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"eventCoding\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodiceEventoMessageHeader\",\n                    \"code\": \"O21 OML\",\n                    \"display\": \"Ordine di laboratorio\"\n                },\n                \"destination\": {\n                    \"name\": \"OMR\",\n                    \"endpoint\": \"localhost:52773/fhir/retilab/Omr\"\n                },\n                \"source\": {\n                    \"name\": \"{{CodiceApplicativo}}\",\n                    \"software\": \"{{NomeSoftware}}\",\n                    \"endpoint\": \"{{URL_Mock}}\"\n                },\n                \"focus\": [\n                    {\n                        \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n            \"resource\": {\n                \"resourceType\": \"Encounter\",\n                \"id\": \"ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabEncounterInformazioniRichiestaLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                                    \"code\": \"VN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"202300001\",\n                        \"assigner\": {\n                            \"reference\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n                            \"display\": \"Laboratorio richiedente\"\n                        }\n                    }\n                ],\n                \"status\": \"planned\",\n                \"class\": {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"code\": \"IMP\",\n                    \"display\": \"Impatient\"\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    }\n                ],\n                \"diagnosis\": [\n                    {\n                        \"condition\": {\n                            \"reference\": \"Condition/25bc970c-d45c-11ed-afa1-0242ac120002\"\n                        },\n                        \"rank\": 1\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/Anamnesi\",\n                        \"valueString\": \"Il paziente ha riferito di avere avuto episodi di vertigini negli ultimi mesi\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/DettaglioOperatoreRiceveOrdine\",\n                        \"valueString\": \"Si \\u00e8 provveduto alla raccolta dei campioni biologoci del paziente\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/NotePazientePrestazione\",\n                        \"valueString\": \"Sono stati prelevati campioni di sangue dal paziente per l'esecuzione degli esami di laboratorio prescritti.\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Condition/25bc970c-d45c-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Condition\",\n                \"id\": \"25bc970c-d45c-11ed-afa1-0242ac120002\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabConditionDiagnosi\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/IdentificativoDiagnosi\",\n                        \"value\": \"012345\"\n                    }\n                ],\n                \"category\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TipoDiagnosiPatologia\",\n                                \"code\": \"A\",\n                                \"display\": \"Diagnosi di accettazione\"\n                            },\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TipoDiagnosiPatologia\",\n                                \"code\": \"P\",\n                                \"display\": \"Patologia principale\"\n                            }\n                        ]\n                    }\n                ],\n                \"severity\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"24484000\",\n                            \"display\": \"Severe\"\n                        }\n                    ]\n                },\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceDiagnosi\",\n                            \"code\": \"39065001\",\n                            \"display\": \"Ustione dell'orecchio\"\n                        }\n                    ]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Mario Rossi\"\n                },\n                \"recordedDate\": \"2013-03-11T23:45:32Z\",\n                \"asserter\": {\n                    \"reference\": \"Practitioner/660cecf8-d45c-11ed-afa1-0242ac120002\",\n                    \"display\": \"Luca Verdi\"\n                },\n                \"note\": [\n                    {\n                        \"text\": \"Note aggiuntive sulla diagnosi\"\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabConditionConfidenzialitaDiagnosi\",\n                        \"valueString\": \"Diagnosi confidenziale\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"e2bdf00d-2235-4465-8b9c-944e337efd47\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"{{PlacerOrderNumber}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"{{formattedRequisition}}\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR1SISS}}\",\n                            \"display\": \"{{ServiceRequest1}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"supportingInfo\": {\n                    \"reference\": \"Observation/d52a9b60-d45e-11ed-afa1-0242ac120002\",\n                    \"display\": \"Info Cliniche\"\n                },\n                \"specimen\": [\n                    {\n                        \"reference\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n                        \"display\": \"Campione da analizzare\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Observation/d52a9b60-d45e-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"id\": \"Esempio Observation Info Cliniche\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabObservationInfoCliniche\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"15074-8\",\n                            \"display\": \"Glucose [Moles/volume] in Blood\"\n                        }\n                    ]\n                },\n                \"valueQuantity\": {\n                    \"value\": 6.3,\n                    \"unit\": \"mmol/l\"\n                },\n                \"note\": {\n                    \"text\": \"note aggiuntive\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n            \"resource\": {\n                \"resourceType\": \"Specimen\",\n                \"id\": \"4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabSpecimenCampioneDaAnalizzare\"\n                    ],\n                    \"versionId\": 1\n                },\n                \"receivedTime\": \"2022-11-16T14:59:37Z\",\n                \"collection\": {\n                    \"collectedDateTime\": \"2022-11-16T14:59:37Z\",\n                    \"quantity\": {\n                        \"value\": 0\n                    },\n                    \"bodySite\": {\n                        \"coding\": [\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                                \"code\": \"TBD\",\n                                \"display\": \"TBD\"\n                            }\n                        ]\n                    }\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceStruttura\",\n                        \"value\": \"{{L1code}}\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"37d47b20-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"{{L2code}}\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        },\n        {\n            \"fullUrl\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"6686199c-f386-4345-a178-5e98023575f7\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPatientCittadino\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"PRDCTT00L02L219G\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                                    \"code\": \"SS\",\n                                    \"display\": \"Tessera Sanitaria\"\n                                }\n                            ]\n                        },\n                        \"value\": \"999FJ645\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Prodsiss\",\n                        \"given\": [\n                            \"Centoottantatre\"\n                        ]\n                    }\n                ],\n                \"gender\": \"male\",\n                \"birthDate\": \"2000-07-02\",\n                \"address\": [\n                    {\n                        \"use\": \"BDL\",\n                        \"city\": \"TORINO\",\n                        \"state\": \"TO\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"001272\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"L\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"H\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    }\n                ],\n                \"generalPractitioner\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Practitioner/660cecf8-d45c-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Practitioner\",\n                \"id\": \"Esempio Practitioner Rete Laboratori\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPractitionerMedico\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"VRDLCU85C11F205T\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Verdi\",\n                        \"given\": [\n                            \"Luca\"\n                        ]\n                    }\n                ]\n            }\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "http://localhost:{{port}}/lombardia/retelaboratori/fhir/EnsLib.REST.GenericService/?prova=prova&prova2=prova2",
                            "protocol": "http",
                            "host": "localhost",
                            "port": "{{port}}",
                            "path": [
                                "lombardia",
                                "retelaboratori",
                                "fhir",
                                "EnsLib.REST.GenericService"
                            ],
                            "query": [
                                {
                                    "key": "prova",
                                    "value": "prova"
                                },
                                {
                                    "key": "prova2",
                                    "value": "prova2"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "NewMessage2Req",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": "// Crea una stringa in formato ISO 8601 per la data e l'orario\nconst now = new Date();\nconst isoString = now.toISOString();\npm.collectionVariables.set(\"Date\", isoString);\n\n// Definisci il nome del laboratorio\nconst softwareName = \"NomeSoftware_VSC\"   \npm.collectionVariables.set(\"NomeSoftware\", softwareName);\n\nconsole.log(\"\");\nconsole.log(\"This is the pre request script of a new order message, generated at: \" + pm.collectionVariables.get(\"Date\") + \" by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\nvar requisitionKey = \"requisition\";\n\n// Verifica se la variabile \"requisition\" \u00e8 stata precedentemente dichiarata\n// Se non \u00e8 stata dichiarata, imposta il valore predefinito a 1\nlet requisition = pm.collectionVariables.has(requisitionKey)\n  ? pm.collectionVariables.get(requisitionKey)\n  : 1;\n\nif (requisition !== 1) {\n    requisition++;\n}\n\n// Aggiungi zeri iniziali fino a raggiungere la lunghezza desiderata\nrequisition = requisition.toString().padStart(8, \"0\");\n\n// Inserisci i trattini nella variabile \"requisition\"\nvar formattedRequisition = requisition.slice(0, 4) + \"-\" + requisition.slice(4) + '-';\n\n// Stampa il valore formattato della variabile \"requisition\"\nconsole.log(\"The formatted requisition is:\", formattedRequisition);\n\n// Aggiorna il valore della variabile di raccolta \"requisition\"\npm.collectionVariables.set(requisitionKey, requisition);\npm.collectionVariables.set(\"formattedRequisition\", formattedRequisition);\n\n// (Se necessario) Rimuovi la variabile \"requisition\" dalla collezione di variabili\n//pm.collectionVariables.unset(requisitionKey);\n\n// Genera un UUID casuale utilizzando $randomUUID\nconst BundleID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"BundleID\", BundleID);\n\n// Stampa il valore del Bundle ID\nconsole.log(\"The Bundle UID is:\", BundleID);\n\n// Definiamo una di valori predefiniti per le Service Request e i relativi codici SISS\nconst serviceRequestList = [\"Emocromo completo\", \"Insulina a digiuno\", \"Glicemia a digiuno\", \"Magnesio totale nelle urine\", \"Chetosteroidi nelle urine\", \"Cortisolo nel sangue\"];\nconst SISSCodeList = [\"90622\", \"90291\", \"90271\", \"90325\", \"90013\", \"90352\"];\n\n// Genera un indice casuale per selezionare un valore dalla lista\nconst randomIndex = Math.floor(Math.random() * serviceRequestList.length);\nlet randomIndex2 = randomIndex;\n\n// Ripeti il processo per la Service Request 2\nwhile (randomIndex2 === randomIndex) {\n  randomIndex2 = Math.floor(Math.random() * serviceRequestList.length);\n}\n\n// Seleziona il valore casuale dalla lista per la Service Request 1\nconst randomValue =  serviceRequestList[randomIndex] ;\nconst randomSISS =  SISSCodeList[randomIndex] ;\n\n// Seleziona il valore casuale dalla lista per la Service Request 2\nconst randomValue2 =  serviceRequestList[randomIndex2] ;\nconst randomSISS2 =  SISSCodeList[randomIndex2] ;\n\n// Assegna i valori casuali alle variabili delle Service Request\npm.environment.set(\"ServiceRequest1\", randomValue);\npm.environment.set(\"SR1SISS\", randomSISS);\npm.environment.set(\"ServiceRequest2\", randomValue2);\npm.environment.set(\"SR2SISS\", randomSISS2);\n\n// Stampa le prestazioni richieste casualmente\nconsole.log(\"Service Request 1 is:\", randomValue, randomSISS, \"; Service Request 2 is:\", randomValue2, randomSISS2);\n\n// Crea un UUID per il Message Header\nconst MessageHeaderID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"MessageHeaderID\", MessageHeaderID);\npm.collectionVariables.set(\"MessageHeaderFullUrl\", \"MessageHeader\"+\"/\"+MessageHeaderID);\nconsole.log(\"MessageHeaderID:\", MessageHeaderID);\n\n// Crea un placer order number (identificativo univoco dell'ordine) tramite il ServiceOrderNumber\nvar serviceIDKey = \"serviceID\";\n\nlet serviceID = pm.collectionVariables.has(serviceIDKey)\n  ? pm.collectionVariables.get(serviceIDKey)\n  : 1;\n\nif (serviceID !== 1) {\n  serviceID++;\n}\n\nserviceIDString = serviceID.toString().padStart(4, \"0\");\nsecondServiceIDString = (serviceID+1).toString().padStart(4, \"0\");\npm.collectionVariables.set(serviceIDKey, serviceID);\nserviceID++;\npm.collectionVariables.set(serviceIDKey,serviceID);\nconsole.log(\"Service ID:\",serviceID)\n\n// Dichiara le informazioni sull'Ente\nconst CodiceApplicativo = \"CodiceApplicativo_VSC\"  \npm.collectionVariables.set(\"CodiceApplicativo\", CodiceApplicativo);\nconst L1code = \"L1code_VSC\"   \npm.collectionVariables.set(\"L1code\", L1code);\nconst L2code = \"L2code_VSC\"   \npm.collectionVariables.set(\"L2code\", L2code);\n\nconsole.log(\"L1 code: \",pm.collectionVariables.get(\"L1code\"), \"L2 code: \",pm.collectionVariables.get(\"L2code\"))\nconsole.log(\"CodiceApplicativo: \",pm.collectionVariables.get(\"CodiceApplicativo\"))\nconsole.log(\"URL Mock Service: \",pm.collectionVariables.get(\"URL_Mock\"))\n\npm.collectionVariables.set(\"PlacerOrderNumber\", CodiceApplicativo+\"-\"+serviceIDString);\npm.collectionVariables.set(\"PlacerOrderNumber2\", CodiceApplicativo+\"-\"+secondServiceIDString);\nconsole.log(\"\");\n",
                                "type": "text/javascript"
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": "console.log(\"This is the test script of a new order message generated by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\nvar keyNum = 1;\n\nconst headerCount = Object.keys(pm.response.headers).length;\n//console.log(\"Number of headers:\", headerCount);\n\nvar orderUID = pm.response.headers.get(\"OMROrderID\");\npm.environment.set(\"OMROrderUID\", orderUID);\nconsole.log(\"Header OMROrderUID: \" + orderUID);\n\nfor (var i = 1; i <= headerCount-4; i++) {\n    var serviceUID = pm.response.headers.get(\"OMRServiceID\" + i);\n    pm.environment.set(\"OMRServiceUID\" + i, serviceUID);\n    console.log(\"Header OMRServiceUID\" + i + \": \" + serviceUID);\n}\n",
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"richiesta\": \"New Request\",\n    \"resourceType\": \"Bundle\",\n    \"id\": \"{{BundleID}}\",\n    \"type\": \"message\",\n    \"timestamp\": \"{{Date}}\",\n    \"entry\": [\n        {\n            \"fullUrl\": \"{{MessageHeaderFullUrl}}\",\n            \"resource\": {\n                \"resourceType\": \"MessageHeader\",\n                \"id\": \"{{MessageHeaderID}}\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabMessageHeader\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"eventCoding\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodiceEventoMessageHeader\",\n                    \"code\": \"O21 OML\",\n                    \"display\": \"Ordine di laboratorio\"\n                },\n                \"destination\": {\n                    \"name\": \"OMR\",\n                    \"endpoint\": \"localhost:52773/fhir/retilab/Omr\"\n                },\n                \"source\": {\n                    \"name\": \"{{CodiceApplicativo}}\",\n                    \"software\": \"{{NomeSoftware}}\",\n                    \"endpoint\": \"{{URL_Mock}}\"\n                },\n                \"focus\": [\n                    {\n                        \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n            \"resource\": {\n                \"resourceType\": \"Encounter\",\n                \"id\": \"ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabEncounterInformazioniRichiestaLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                                    \"code\": \"VN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"202300001\",\n                        \"assigner\": {\n                            \"reference\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n                            \"display\": \"Laboratorio richiedente\"\n                        }\n                    }\n                ],\n                \"status\": \"planned\",\n                \"class\": {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"code\": \"IMP\",\n                    \"display\": \"Impatient\"\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    },\n                    {\n                        \"reference\": \"ServiceRequest/d4ca776d-feb4-43ab-b945-36c47cafb8b3\"\n                    }\n                ],\n                \"diagnosis\": [\n                    {\n                        \"condition\": {\n                            \"reference\": \"Condition/25bc970c-d45c-11ed-afa1-0242ac120002\"\n                        },\n                        \"rank\": 1\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/Anamnesi\",\n                        \"valueString\": \"Il paziente ha riferito di avere avuto episodi di vertigini negli ultimi mesi\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/DettaglioOperatoreRiceveOrdine\",\n                        \"valueString\": \"Si \\u00e8 provveduto alla raccolta dei campioni biologoci del paziente\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/NotePazientePrestazione\",\n                        \"valueString\": \"Sono stati prelevati campioni di sangue dal paziente per l'esecuzione degli esami di laboratorio prescritti.\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Condition/25bc970c-d45c-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Condition\",\n                \"id\": \"25bc970c-d45c-11ed-afa1-0242ac120002\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabConditionDiagnosi\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/IdentificativoDiagnosi\",\n                        \"value\": \"012345\"\n                    }\n                ],\n                \"category\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TipoDiagnosiPatologia\",\n                                \"code\": \"A\",\n                                \"display\": \"Diagnosi di accettazione\"\n                            },\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TipoDiagnosiPatologia\",\n                                \"code\": \"P\",\n                                \"display\": \"Patologia principale\"\n                            }\n                        ]\n                    }\n                ],\n                \"severity\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"24484000\",\n                            \"display\": \"Severe\"\n                        }\n                    ]\n                },\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceDiagnosi\",\n                            \"code\": \"39065001\",\n                            \"display\": \"Ustione dell'orecchio\"\n                        }\n                    ]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Mario Rossi\"\n                },\n                \"recordedDate\": \"2013-03-11T23:45:32Z\",\n                \"asserter\": {\n                    \"reference\": \"Practitioner/660cecf8-d45c-11ed-afa1-0242ac120002\",\n                    \"display\": \"Luca Verdi\"\n                },\n                \"note\": [\n                    {\n                        \"text\": \"Note aggiuntive sulla diagnosi\"\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabConditionConfidenzialitaDiagnosi\",\n                        \"valueString\": \"Diagnosi confidenziale\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"e2bdf00d-2235-4465-8b9c-944e337efd47\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"{{PlacerOrderNumber}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"{{formattedRequisition}}\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR1SISS}}\",\n                            \"display\": \"{{ServiceRequest1}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"supportingInfo\": {\n                    \"reference\": \"Observation/d52a9b60-d45e-11ed-afa1-0242ac120002\",\n                    \"display\": \"Info Cliniche\"\n                },\n                \"specimen\": [\n                    {\n                        \"reference\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n                        \"display\": \"Campione da analizzare\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/d4ca776d-feb4-43ab-b945-36c47cafb8b3\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"d4ca776d-feb4-43ab-b945-36c47cafb8b3\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"{{PlacerOrderNumber2}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"{{formattedRequisition}}\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR2SISS}}\",\n                            \"display\": \"{{ServiceRequest2}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"specimen\": [\n                    {\n                        \"reference\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69000\",\n                        \"display\": \"Campione da analizzare\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Observation/d52a9b60-d45e-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"id\": \"Esempio Observation Info Cliniche\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabObservationInfoCliniche\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"15074-8\",\n                            \"display\": \"Glucose [Moles/volume] in Blood\"\n                        }\n                    ]\n                },\n                \"valueQuantity\": {\n                    \"value\": 6.3,\n                    \"unit\": \"mmol/l\"\n                },\n                \"note\": {\n                    \"text\": \"note aggiuntive\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69000\",\n            \"resource\": {\n                \"resourceType\": \"Specimen\",\n                \"id\": \"4bbecc4b-60b4-4b4a-9b99-ce39b1f69000\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabSpecimenCampioneDaAnalizzare\"\n                    ],\n                    \"versionId\": 1\n                },\n                \"receivedTime\": \"2022-11-16T14:59:37Z\",\n                \"collection\": {\n                    \"collectedDateTime\": \"2022-11-16T14:59:37Z\",\n                    \"quantity\": {\n                        \"value\": 0\n                    },\n                    \"bodySite\": {\n                        \"coding\": [\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                                \"code\": \"TBD\",\n                                \"display\": \"TBD\"\n                            }\n                        ]\n                    }\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Specimen/4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n            \"resource\": {\n                \"resourceType\": \"Specimen\",\n                \"id\": \"4bbecc4b-60b4-4b4a-9b99-ce39b1f69876\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabSpecimenCampioneDaAnalizzare\"\n                    ],\n                    \"versionId\": 1\n                },\n                \"receivedTime\": \"2022-11-16T14:59:37Z\",\n                \"collection\": {\n                    \"collectedDateTime\": \"2022-11-16T14:59:37Z\",\n                    \"quantity\": {\n                        \"value\": 0\n                    },\n                    \"bodySite\": {\n                        \"coding\": [\n                            {\n                                \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                                \"code\": \"TBD\",\n                                \"display\": \"TBD\"\n                            }\n                        ]\n                    }\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceStruttura\",\n                        \"value\": \"{{L1code}}\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"37d47b20-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"{{L2code}}\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        },\n        {\n            \"fullUrl\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"6686199c-f386-4345-a178-5e98023575f7\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPatientCittadino\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"PRDCTT00L02L219G\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                                    \"code\": \"SS\",\n                                    \"display\": \"Tessera Sanitaria\"\n                                }\n                            ]\n                        },\n                        \"value\": \"999FJ645\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Prodsiss\",\n                        \"given\": [\n                            \"Centoottantatre\"\n                        ]\n                    }\n                ],\n                \"gender\": \"male\",\n                \"birthDate\": \"2000-07-02\",\n                \"address\": [\n                    {\n                        \"use\": \"BDL\",\n                        \"city\": \"TORINO\",\n                        \"state\": \"TO\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"001272\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"L\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"H\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    }\n                ],\n                \"generalPractitioner\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Practitioner/660cecf8-d45c-11ed-afa1-0242ac120002\",\n            \"resource\": {\n                \"resourceType\": \"Practitioner\",\n                \"id\": \"Esempio Practitioner Rete Laboratori\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPractitionerMedico\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"VRDLCU85C11F205T\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Verdi\",\n                        \"given\": [\n                            \"Luca\"\n                        ]\n                    }\n                ]\n            }\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "http://localhost:{{port}}/lombardia/retelaboratori/fhir/EnsLib.REST.GenericService/?prova=prova&prova2=prova2",
                            "protocol": "http",
                            "host": "localhost",
                            "port": "{{port}}",
                            "path": [
                                "lombardia",
                                "retelaboratori",
                                "fhir",
                                "EnsLib.REST.GenericService"
                            ],
                            "query": [
                                {
                                    "key": "prova",
                                    "value": "prova"
                                },
                                {
                                    "key": "prova2",
                                    "value": "prova2"
                                }
                            ]
                        }
                    }
                }
            ],
            "description": "# New Request\n\nIn questa cartella sono contenuti i messaggi che il laboratorio (come ER) invia per richiedere 1 o 2 prestazioni all'OMR:\n\n  * \"*ER request 1 service request*\": richiesta di 1 prestazione;\n  * \"*ER request 2 service requests*\": richiesta di 2 prestazioni;"
        },
        {
            "name": "2_CheckInNotification",
            "item": [
                {
                    "name": "Notification1Req",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": "// Crea una stringa in formato ISO 8601 per la data e l'orario\nconst now = new Date();\nconst isoString = now.toISOString();\npm.collectionVariables.set(\"Date\", isoString);\n\nconsole.log(\"\");\nconsole.log(\"This is the pre request script of a check-in notification message, generated at: \" + pm.collectionVariables.get(\"Date\") + \" by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\n// Crea un UUID per il Message Header\nconst MessageHeaderID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"MessageHeaderID\", MessageHeaderID);\npm.collectionVariables.set(\"MessageHeaderFullUrl\", \"MessageHeader\"+\"/\"+MessageHeaderID);\nconsole.log(\"MessageHeaderID:\", MessageHeaderID);\n\n// Dichiara le informazioni sull'Ente\nconst CodiceApplicativo = \"CodiceApplicativo_VSC\"  \npm.collectionVariables.set(\"CodiceApplicativo\", CodiceApplicativo);\nconst L1code = \"L1code_VSC\"   \npm.collectionVariables.set(\"L1code\", L1code);\nconst L2code = \"L2code_VSC\"   \npm.collectionVariables.set(\"L2code\", L2code);\nconst softwareName = \"NomeSoftware_VSC\"   \npm.collectionVariables.set(\"NomeSoftware\", softwareName);\n\nconsole.log(\"L1 code: \",pm.collectionVariables.get(\"L1code\"), \"L2 code: \",pm.collectionVariables.get(\"L2code\"))\nconsole.log(\"CodiceApplicativo: \",pm.collectionVariables.get(\"CodiceApplicativo\"))\n",
                                "type": "text/javascript"
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "..."
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"resourceType\": \"Bundle\",\n    \"id\": \"{{$randomUUID}}\",\n    \"type\": \"message\",\n    \"timestamp\": \"{{Date}}\",\n    \"entry\": [\n        {\n            \"fullUrl\": \"{{MessageHeaderFullUrl}}\",\n            \"resource\": {\n                \"resourceType\": \"MessageHeader\",\n                \"id\": \"{{MessageHeaderID}}\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabMessageHeader\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"eventCoding\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodiceEventoMessageHeader\",\n                    \"code\": \"O21 OML\",\n                    \"display\": \"Notifica Check In\"\n                },\n                \"destination\": {\n                    \"name\": \"OMR\",\n                    \"endpoint\": \"localhost:52773/fhir/retilab/Omr\"\n                },\n                \"source\": {\n                    \"name\": \"{{CodiceApplicativo}}\",\n                    \"software\": \"{{NomeSoftware}}\",\n                    \"endpoint\": \"{{URL_Mock}}\"\n                },\n                \"focus\": [\n                    {\n                        \"reference\": \"Task/c1d60f86-ffe1-44e8-a3bc-be73e50951f9\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Task/c1d60f86-ffe1-44e8-a3bc-be73e50951f9\",\n            \"resource\": {\n                \"resourceType\": \"Task\",\n                \"id\": \"c1d60f86-ffe1-44e8-a3bc-be73e50951f9\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabTaskStatoRichiesta\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    }\n                ],\n                \"status\": \"in-progress\",\n                \"intent\": \"order\",\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n            \"resource\": {\n                \"resourceType\": \"Encounter\",\n                \"id\": \"ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabEncounterInformazioniRichiestaLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                                    \"code\": \"VN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"202300001\",\n                        \"assigner\": {\n                            \"reference\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n                            \"display\": \"Laboratorio richiedente\"\n                        }\n                    }\n                ],\n                \"status\": \"in-progress\",\n                \"class\": {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"code\": \"IMP\",\n                    \"display\": \"Impatient\"\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/Anamnesi\",\n                        \"valueString\": \"Il paziente ha riferito di avere avuto episodi di vertigini negli ultimi mesi\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/DettaglioOperatoreRiceveOrdine\",\n                        \"valueString\": \"Si \\u00e8 provveduto alla raccolta dei campioni biologoci del paziente\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/NotePazientePrestazione\",\n                        \"valueString\": \"Sono stati prelevati campioni di sangue dal paziente per l'esecuzione degli esami di laboratorio prescritti.\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"e2bdf00d-2235-4465-8b9c-944e337efd47\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"Placer Order Number\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/FillerOrderNumber\",\n                        \"value\": \"{{$randomUUID}}\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/OMROrderNumber\",\n                        \"value\": \"{{OMRServiceUID1}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"Placer Requisition Value\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR1SISS}}\",\n                            \"display\": \"{{ServiceRequest1}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"performer\": [\n                    {\n                        \"reference\": \"Organization/30d4p103-fbe0-11ed-99f7-02001700b287\"\n                    }\n                ],\n                \"reasonCode\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"system\": \"http://hl7.org/fhir/sid/icd-9\",\n                                \"code\": \"V173\",\n                                \"display\": \"Fam hx-ischem heart dis\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"6686199c-f386-4345-a178-5e98023575f7\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPatientCittadino\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"PRDCTT00L02L219G\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                                    \"code\": \"SS\",\n                                    \"display\": \"Tessera Sanitaria\"\n                                }\n                            ]\n                        },\n                        \"value\": \"999FJ645\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Prodsiss\",\n                        \"given\": [\n                            \"Centoottantatre\"\n                        ]\n                    }\n                ],\n                \"gender\": \"male\",\n                \"birthDate\": \"2000-07-02\",\n                \"address\": [\n                    {\n                        \"use\": \"BDL\",\n                        \"city\": \"TORINO\",\n                        \"state\": \"TO\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"001272\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"L\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"H\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    }\n                ],\n                \"generalPractitioner\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n            \"resource\": {\n                \"resourceType\": \"Practitioner\",\n                \"id\": \"1fcacede-58fa-4500-8868-92644f365799\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPractitionerMedico\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"NVESFN77E09H264L\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Neva\",\n                        \"given\": [\n                            \"Stefano\"\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceIdentificativoEnte\",\n                        \"value\": \"Codice L1 Ente Richiedente\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"37d47b20-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"Codice L2 Ente Richiedente\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/34568719c-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"34568719c-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceIdentificativoEnte\",\n                        \"value\": \"{{L1code}}\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/30d4p103-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"30d4p103-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"{{L2code}}\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/34568719c-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "http://localhost:{{port}}/lombardia/retelaboratori/fhir/EnsLib.REST.GenericService/?prova=prova&prova2=prova2",
                            "protocol": "http",
                            "host": "localhost",
                            "port": "{{port}}",
                            "path": [
                                "lombardia",
                                "retelaboratori",
                                "fhir",
                                "EnsLib.REST.GenericService"
                            ],
                            "query": [
                                {
                                    "key": "prova",
                                    "value": "prova"
                                },
                                {
                                    "key": "prova2",
                                    "value": "prova2"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Notification2Req",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": "// Crea una stringa in formato ISO 8601 per la data e l'orario\nconst now = new Date();\nconst isoString = now.toISOString();\npm.collectionVariables.set(\"Date\", isoString);\n\nconsole.log(\"\");\nconsole.log(\"This is the pre request script of a check-in notification message, generated at: \" + pm.collectionVariables.get(\"Date\") + \" by \" + pm.collectionVariables.get(\"NomeSoftware\"));\n\n// Crea un UUID per il Message Header\nconst MessageHeaderID = pm.variables.replaceIn(\"{{$randomUUID}}\").toString();\npm.collectionVariables.set(\"MessageHeaderID\", MessageHeaderID);\npm.collectionVariables.set(\"MessageHeaderFullUrl\", \"MessageHeader\"+\"/\"+MessageHeaderID);\nconsole.log(\"MessageHeaderID:\", MessageHeaderID);\n\n// Dichiara le informazioni sull'Ente\nconst CodiceApplicativo = \"CodiceApplicativo_VSC\"  \npm.collectionVariables.set(\"CodiceApplicativo\", CodiceApplicativo);\nconst L1code = \"L1code_VSC\"   \npm.collectionVariables.set(\"L1code\", L1code);\nconst L2code = \"L2code_VSC\"   \npm.collectionVariables.set(\"L2code\", L2code);\nconst softwareName = \"NomeSoftware_VSC\"   \npm.collectionVariables.set(\"NomeSoftware\", softwareName);\n\nconsole.log(\"L1 code: \",pm.collectionVariables.get(\"L1code\"), \"L2 code: \",pm.collectionVariables.get(\"L2code\"))\nconsole.log(\"CodiceApplicativo: \",pm.collectionVariables.get(\"CodiceApplicativo\"))\n",
                                "type": "text/javascript"
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "..."
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"resourceType\": \"Bundle\",\n    \"id\": \"{{$randomUUID}}\",\n    \"type\": \"message\",\n    \"timestamp\": \"{{Date}}\",\n    \"entry\": [\n        {\n            \"fullUrl\": \"{{MessageHeaderFullUrl}}\",\n            \"resource\": {\n                \"resourceType\": \"MessageHeader\",\n                \"id\": \"{{MessageHeaderID}}\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabMessageHeader\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"eventCoding\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodiceEventoMessageHeader\",\n                    \"code\": \"O21 OML\",\n                    \"display\": \"Notifica Check In\"\n                },\n                \"destination\": {\n                    \"name\": \"OMR\",\n                    \"endpoint\": \"localhost:52773/fhir/retilab/Omr\"\n                },\n                \"source\": {\n                    \"name\": \"{{CodiceApplicativo}}\",\n                    \"software\": \"{{NomeSoftware}}\",\n                    \"endpoint\": \"{{URL_Mock}}\"\n                },\n                \"focus\": [\n                    {\n                        \"reference\": \"Task/c1d60f86-ffe1-44e8-a3bc-be73e50951f9\"\n                    },\n                    {\n                        \"reference\": \"Task/778fb6c0-e4f0-459a-9940-fedf650593ee\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Task/c1d60f86-ffe1-44e8-a3bc-be73e50951f9\",\n            \"resource\": {\n                \"resourceType\": \"Task\",\n                \"id\": \"c1d60f86-ffe1-44e8-a3bc-be73e50951f9\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabTaskStatoRichiesta\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    }\n                ],\n                \"status\": \"in-progress\",\n                \"intent\": \"order\",\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Task/778fb6c0-e4f0-459a-9940-fedf650593ee\",\n            \"resource\": {\n                \"resourceType\": \"Task\",\n                \"id\": \"778fb6c0-e4f0-459a-9940-fedf650593ee\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabTaskStatoRichiesta\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/d4ca776d-feb4-43ab-b945-36c47cafb8b3\"\n                    }\n                ],\n                \"status\": \"in-progress\",\n                \"intent\": \"order\",\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n            \"resource\": {\n                \"resourceType\": \"Encounter\",\n                \"id\": \"ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabEncounterInformazioniRichiestaLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/numeroRicovero\",\n                                    \"code\": \"VN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"202300001\",\n                        \"assigner\": {\n                            \"reference\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n                            \"display\": \"Laboratorio richiedente\"\n                        }\n                    }\n                ],\n                \"status\": \"in-progress\",\n                \"class\": {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"code\": \"IMP\",\n                    \"display\": \"Impatient\"\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\"\n                },\n                \"basedOn\": [\n                    {\n                        \"reference\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\"\n                    },\n                    {\n                        \"reference\": \"ServiceRequest/d4ca776d-feb4-43ab-b945-36c47cafb8b3\"\n                    }\n                ],\n                \"extension\": [\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/Anamnesi\",\n                        \"valueString\": \"Il paziente ha riferito di avere avuto episodi di vertigini negli ultimi mesi\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/DettaglioOperatoreRiceveOrdine\",\n                        \"valueString\": \"Si \\u00e8 provveduto alla raccolta dei campioni biologoci del paziente\"\n                    },\n                    {\n                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/NotePazientePrestazione\",\n                        \"valueString\": \"Sono stati prelevati campioni di sangue dal paziente per l'esecuzione degli esami di laboratorio prescritti.\"\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/e2bdf00d-2235-4465-8b9c-944e337efd47\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"e2bdf00d-2235-4465-8b9c-944e337efd47\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"Placer Order Number\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/FillerOrderNumber\",\n                        \"value\": \"{{$randomUUID}}\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/OMROrderNumber\",\n                        \"value\": \"{{OMRServiceUID1}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"Placer Requisition Value\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR1SISS}}\",\n                            \"display\": \"{{ServiceRequest1}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"performer\": [\n                    {\n                        \"reference\": \"Organization/30d4p103-fbe0-11ed-99f7-02001700b287\"\n                    }\n                ],\n                \"reasonCode\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"system\": \"http://hl7.org/fhir/sid/icd-9\",\n                                \"code\": \"V173\",\n                                \"display\": \"Fam hx-ischem heart dis\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"ServiceRequest/d4ca776d-feb4-43ab-b945-36c47cafb8b3\",\n            \"resource\": {\n                \"resourceType\": \"ServiceRequest\",\n                \"id\": \"d4ca776d-feb4-43ab-b945-36c47cafb8b3\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabServiceRequestRichiestaEsamiLab\"\n                    ],\n                    \"versionId\": \"1\"\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerOrderNumber\",\n                        \"value\": \"Placer Order Number\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/FillerOrderNumber\",\n                        \"value\": \"{{$randomUUID}}\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/OMROrderNumber\",\n                        \"value\": \"{{OMRServiceUID2}}\"\n                    }\n                ],\n                \"requisition\": {\n                    \"system\": \"https://fhir.siss.regione.lombardia.it/sid/PlacerRequisitionNumber\",\n                    \"value\": \"Placer Requisition Value\"\n                },\n                \"status\": \"active\",\n                \"intent\": \"order\",\n                \"priority\": \"asap\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/ValueSet/CodificaLOINC\",\n                            \"code\": \"{{SR2SISS}}\",\n                            \"display\": \"{{ServiceRequest2}}\"\n                        }\n                    ]\n                },\n                \"orderDetail\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoUnitaErogante\",\n                            \"code\": \"0002\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialeReparto\",\n                            \"code\": \"0801\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                            \"code\": \"03091300\"\n                        },\n                        {\n                            \"system\": \"https://fhir.siss.regione.lombardia.it/sid/identificativoInternoSalaErogatrice\",\n                            \"code\": \"LAB\"\n                        }\n                    ]\n                },\n                \"quantityQuantity\": {\n                    \"value\": 1\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n                    \"display\": \"Centoottantatre Prodsiss\"\n                },\n                \"encounter\": {\n                    \"reference\": \"Encounter/ace5cde7-33f3-4d36-9d6b-9a837ed7fdcb\",\n                    \"display\": \"Informazioni Richiesta Lab\"\n                },\n                \"authoredOn\": \"2022-11-16T14:59:37Z\",\n                \"requester\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n                    \"display\": \"Medico\"\n                },\n                \"performer\": [\n                    {\n                        \"reference\": \"Organization/30d4p103-fbe0-11ed-99f7-02001700b287\"\n                    }\n                ],\n                \"reasonCode\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"system\": \"http://hl7.org/fhir/sid/icd-9\",\n                                \"code\": \"V173\",\n                                \"display\": \"Fam hx-ischem heart dis\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Patient/6686199c-f386-4345-a178-5e98023575f7\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"6686199c-f386-4345-a178-5e98023575f7\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPatientCittadino\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\",\n                                    \"display\": \"Codice fiscale\"\n                                }\n                            ]\n                        },\n                        \"value\": \"PRDCTT00L02L219G\"\n                    },\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraSanitaria\",\n                                    \"code\": \"SS\",\n                                    \"display\": \"Tessera Sanitaria\"\n                                }\n                            ]\n                        },\n                        \"value\": \"999FJ645\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Prodsiss\",\n                        \"given\": [\n                            \"Centoottantatre\"\n                        ]\n                    }\n                ],\n                \"gender\": \"male\",\n                \"birthDate\": \"2000-07-02\",\n                \"address\": [\n                    {\n                        \"use\": \"BDL\",\n                        \"city\": \"TORINO\",\n                        \"state\": \"TO\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"001272\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"L\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    },\n                    {\n                        \"use\": \"H\",\n                        \"text\": \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI, 24\",\n                        \"line\": [\n                            \"V. C/O LOMBARDIA INFORMATICA VIA MINZONI\",\n                            {\n                                \"extension\": [\n                                    {\n                                        \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressLineNumeroCivico\",\n                                        \"valueString\": \"24\"\n                                    }\n                                ]\n                            }\n                        ],\n                        \"city\": \"MILANO\",\n                        \"state\": \"MI\",\n                        \"postalCode\": \"20158\",\n                        \"extension\": [\n                            {\n                                \"url\": \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabAddressCodiceISTAT\",\n                                \"valueString\": \"015146\"\n                            }\n                        ]\n                    }\n                ],\n                \"generalPractitioner\": {\n                    \"reference\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"Practitioner/1fcacede-58fa-4500-8868-92644f365799\",\n            \"resource\": {\n                \"resourceType\": \"Practitioner\",\n                \"id\": \"1fcacede-58fa-4500-8868-92644f365799\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabPractitionerMedico\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                        \"type\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"https://fhir.siss.regione.lombardia.it/CodeSystem/CodiceFiscale\",\n                                    \"code\": \"NN\"\n                                }\n                            ]\n                        },\n                        \"value\": \"NVESFN77E09H264L\"\n                    }\n                ],\n                \"name\": [\n                    {\n                        \"family\": \"Neva\",\n                        \"given\": [\n                            \"Stefano\"\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"7195779b-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceIdentificativoEnte\",\n                        \"value\": \"Codice L1 Ente Richiedente\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/37d47b20-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"37d47b20-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"Codice L2 Ente Richiedente\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/7195779b-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/34568719c-9c43-4074-a2d4-7e34e18b1ae4\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"34568719c-9c43-4074-a2d4-7e34e18b1ae4\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL1\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceIdentificativoEnte\",\n                        \"value\": \"{{L1code}}\"\n                    }\n                ],\n                \"name\": \"Denominazione dell'ente L1\"\n            }\n        },\n        {\n            \"fullUrl\": \"Organization/30d4p103-fbe0-11ed-99f7-02001700b287\",\n            \"resource\": {\n                \"resourceType\": \"Organization\",\n                \"id\": \"30d4p103-fbe0-11ed-99f7-02001700b287\",\n                \"meta\": {\n                    \"profile\": [\n                        \"https://fhir.siss.regione.lombardia.it/StructureDefinition/ReteLabOrganizationL2\"\n                    ]\n                },\n                \"identifier\": [\n                    {\n                        \"system\": \"https://fhir.siss.regione.lombardia.it/sid/codiceMinisterialePresidio\",\n                        \"value\": \"{{L2code}}\"\n                    }\n                ],\n                \"partOf\": {\n                    \"reference\": \"Organization/34568719c-9c43-4074-a2d4-7e34e18b1ae4\"\n                },\n                \"name\": \"Descrizione del presidio L2\"\n            }\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "http://localhost:{{port}}/lombardia/retelaboratori/fhir/EnsLib.REST.GenericService/?prova=prova&prova2=prova2",
                            "protocol": "http",
                            "host": "localhost",
                            "port": "{{port}}",
                            "path": [
                                "lombardia",
                                "retelaboratori",
                                "fhir",
                                "EnsLib.REST.GenericService"
                            ],
                            "query": [
                                {
                                    "key": "prova",
                                    "value": "prova"
                                },
                                {
                                    "key": "prova2",
                                    "value": "prova2"
                                }
                            ]
                        }
                    }
                }
            ],
            "description": "# Check In Notification\n\nIn questa cartella sono contenuti i messaggi che il laboratorio (come ES) invia all'OMR per notificare il check-in di 1 o 2 prestazioni:\n\n  * \"*ES Check-in 1 request*\": invio della notifica di check-in di 1 prestazione;\n  * \"*ES Check-in 2 requests*\": invio della notifica di check-in di 2 prestazioni;"
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "..."
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "..."
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "URL_Mock",
            "value": "https://334dfdde-1ca4-4e0e-b45b-18b19977a72e.mock.pstmn.io",
            "type": "string"
        },
        {
            "key": "port",
            "value": "1888",
            "type": "any"
        },
        {
            "key": "port2",
            "value": "52773",
            "type": "any"
        },
        {
            "key": "requisition",
            "value": "",
            "type": "any"
        },
        {
            "key": "formattedRequisition",
            "value": "",
            "type": "any"
        },
        {
            "key": "MessageHeaderID",
            "value": "",
            "type": "any"
        },
        {
            "key": "MessageHeaderFullUrl",
            "value": "",
            "type": "any"
        },
        {
            "key": "serviceID",
            "value": "",
            "type": "any"
        },
        {
            "key": "Date",
            "value": "",
            "type": "any"
        },
        {
            "key": "CodiceApplicativo",
            "value": "",
            "type": "any"
        },
        {
            "key": "L1code",
            "value": "",
            "type": "any"
        },
        {
            "key": "L2code",
            "value": "",
            "type": "any"
        },
        {
            "key": "NomeSoftware",
            "value": "",
            "type": "any"
        },
        {
            "key": "PlacerOrderNumber",
            "value": "",
            "type": "any"
        },
        {
            "key": "PlacerOrderNumber2",
            "value": "",
            "type": "any"
        },
        {
            "key": "BundleID",
            "value": ""
        }
    ]
}